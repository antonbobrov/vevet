"use strict";(globalThis.webpackChunkmy_docs=globalThis.webpackChunkmy_docs||[]).push([[5727],{7934(e,s,n){n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>a});const l=JSON.parse('{"id":"base/Module/index","title":"Module","description":"Module \u2014 base class for Vevet.js components. Props, callbacks, updateProps, onDestroy, destroy.","source":"@site/docs/base/Module/index.md","sourceDirName":"base/Module","slug":"/base/Module/","permalink":"/docs/base/Module/","draft":false,"unlisted":false,"editUrl":"https://github.com/antonbobrov/vevet/tree/master/docusaurus/docs/base/Module/index.md","tags":[],"version":"current","frontMatter":{"description":"Module \u2014 base class for Vevet.js components. Props, callbacks, updateProps, onDestroy, destroy.","keywords":["vevet module","base module","abstract class","updateProps","callbacks"]},"sidebar":"tutorialSidebar","previous":{"title":"Callbacks","permalink":"/docs/base/Callbacks/"},"next":{"title":"Responsive","permalink":"/docs/base/Responsive/"}}');var d=n(4848),o=n(8453);const r={description:"Module \u2014 base class for Vevet.js components. Props, callbacks, updateProps, onDestroy, destroy.",keywords:["vevet module","base module","abstract class","updateProps","callbacks"]},t="Module",c={},a=[{value:"Constructor",id:"constructor",level:2},{value:"Callbacks",id:"callbacks",level:2},{value:"Accessors",id:"accessors",level:2},{value:"Methods",id:"methods",level:2},{value:"<code>updateProps(props)</code>",id:"updatepropsprops",level:3},{value:"<code>onDestroy(action)</code>",id:"ondestroyaction",level:3},{value:"<code>on(target, listener, settings?)</code>",id:"ontarget-listener-settings",level:3},{value:"<code>destroy()</code>",id:"destroy",level:3},{value:"Example",id:"example",level:2},{value:"Typedoc",id:"typedoc",level:2}];function i(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.header,{children:(0,d.jsx)(s.h1,{id:"module",children:"Module"})}),"\n",(0,d.jsxs)(s.p,{children:[(0,d.jsx)(s.strong,{children:"Module"})," is the abstract base class for all Vevet.js components. It provides:"]}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Unified props"})," \u2014 static and mutable properties with a single ",(0,d.jsx)(s.code,{children:"props"})," object."]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Callbacks"})," \u2014 built-in ",(0,d.jsx)(s.code,{children:"destroy"})," and ",(0,d.jsx)(s.code,{children:"props"})," events, plus custom events via ",(0,d.jsx)(s.strong,{children:(0,d.jsx)(s.a,{href:"/docs/base/Callbacks/",children:"Callbacks"})}),"."]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Lifecycle"})," \u2014 ",(0,d.jsx)(s.code,{children:"updateProps()"}),", ",(0,d.jsx)(s.code,{children:"onDestroy()"}),", and ",(0,d.jsx)(s.code,{children:"destroy()"})," with automatic cleanup."]}),"\n"]}),"\n",(0,d.jsxs)(s.p,{children:["All components (Timeline, Swipe, Scrollbar, Marquee, etc.) extend ",(0,d.jsx)(s.strong,{children:"Module"}),". You can extend it to build your own modules."]}),"\n",(0,d.jsx)(s.h2,{id:"constructor",children:"Constructor"}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-ts",children:"new Module<CallbacksMap, StaticProps, MutableProps>(\n  props?: StaticProps & MutableProps,\n  onCallbacks?: TModuleOnCallbacksProps<CallbacksMap, Module>,\n);\n"})}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"props"})," \u2014 initial static and mutable properties. Subclasses define defaults via ",(0,d.jsx)(s.code,{children:"_getStatic()"})," and ",(0,d.jsx)(s.code,{children:"_getMutable()"}),"."]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"onCallbacks"})," \u2014 optional object of callbacks keyed by ",(0,d.jsx)(s.code,{children:"onEventName"})," (e.g. ",(0,d.jsx)(s.code,{children:"onDestroy"}),", ",(0,d.jsx)(s.code,{children:"onProps"}),"). These are registered on the internal Callbacks instance."]}),"\n"]}),"\n",(0,d.jsx)(s.h2,{id:"callbacks",children:"Callbacks"}),"\n",(0,d.jsxs)(s.p,{children:["Every Module has at least these callbacks (see ",(0,d.jsx)(s.strong,{children:(0,d.jsx)(s.a,{href:"/docs/base/Callbacks/",children:"Callbacks"})})," for ",(0,d.jsx)(s.code,{children:"on()"}),", settings, etc.):"]}),"\n",(0,d.jsxs)(s.table,{children:[(0,d.jsx)(s.thead,{children:(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.th,{children:"Event"}),(0,d.jsx)(s.th,{children:"Payload"}),(0,d.jsx)(s.th,{children:"When"})]})}),(0,d.jsxs)(s.tbody,{children:[(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"destroy"})}),(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"undefined"})}),(0,d.jsx)(s.td,{children:"Before the module is destroyed and callbacks are cleared."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"props"})}),(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"undefined"})}),(0,d.jsxs)(s.td,{children:["After mutable props are updated via ",(0,d.jsx)(s.code,{children:"updateProps()"}),"."]})]})]})]}),"\n",(0,d.jsx)(s.p,{children:"Example:"}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-ts",children:"const module = new Module(\n  { weight: 70 },\n  {\n    onDestroy: () => console.log('destroyed'),\n    onProps: () => console.log('props updated', module.props),\n  },\n);\n\nmodule.updateProps({ weight: 72 }); // logs \"props updated\" and new props\nmodule.destroy(); // logs \"destroyed\"\n"})}),"\n",(0,d.jsxs)(s.p,{children:["Or using ",(0,d.jsx)(s.code,{children:".on()"}),":"]}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-ts",children:"const remove = module.on('props', () => console.log(module.props));\n// later\nremove();\n"})}),"\n",(0,d.jsx)(s.h2,{id:"accessors",children:"Accessors"}),"\n",(0,d.jsxs)(s.table,{children:[(0,d.jsx)(s.thead,{children:(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.th,{children:"Accessor"}),(0,d.jsx)(s.th,{children:"Type"}),(0,d.jsx)(s.th,{children:"Description"})]})}),(0,d.jsxs)(s.tbody,{children:[(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"props"})}),(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"StaticProps & MutableProps"})}),(0,d.jsxs)(s.td,{children:["Current properties. Do not mutate directly; use ",(0,d.jsx)(s.code,{children:"updateProps()"}),"."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"prefix"})}),(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"string"})}),(0,d.jsx)(s.td,{children:"Class name prefix from core (e.g. for CSS class names)."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"name"})}),(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"string"})}),(0,d.jsxs)(s.td,{children:["Constructor name (e.g. ",(0,d.jsx)(s.code,{children:'"Timeline"'}),")."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"isDestroyed"})}),(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"boolean"})}),(0,d.jsx)(s.td,{children:"Whether the module has been destroyed."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"callbacks"})}),(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"Callbacks<CallbacksMap, this>"})}),(0,d.jsxs)(s.td,{children:["The internal ",(0,d.jsx)(s.strong,{children:(0,d.jsx)(s.a,{href:"/docs/base/Callbacks/",children:"Callbacks"})})," instance."]})]})]})]}),"\n",(0,d.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,d.jsx)(s.h3,{id:"updatepropsprops",children:(0,d.jsx)(s.code,{children:"updateProps(props)"})}),"\n",(0,d.jsxs)(s.p,{children:["Updates mutable properties and emits the ",(0,d.jsx)(s.code,{children:"props"})," callback."]}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-ts",children:"module.updateProps({ weight: 75 });\n"})}),"\n",(0,d.jsx)(s.p,{children:"Does nothing if the module is already destroyed."}),"\n",(0,d.jsx)(s.h3,{id:"ondestroyaction",children:(0,d.jsx)(s.code,{children:"onDestroy(action)"})}),"\n",(0,d.jsx)(s.p,{children:"Registers a function to run when the module is destroyed (e.g. remove a class from an element). If the module is already destroyed, the action runs immediately."}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-ts",children:"module.onDestroy(() => element.classList.remove('active'));\n"})}),"\n",(0,d.jsx)(s.h3,{id:"ontarget-listener-settings",children:(0,d.jsx)(s.code,{children:"on(target, listener, settings?)"})}),"\n",(0,d.jsxs)(s.p,{children:["Adds a callback for an event. Returns a function that removes the callback. See ",(0,d.jsx)(s.strong,{children:(0,d.jsx)(s.a,{href:"/docs/base/Callbacks/",children:"Callbacks"})})," for ",(0,d.jsx)(s.code,{children:"settings"})," (e.g. ",(0,d.jsx)(s.code,{children:"once"}),", ",(0,d.jsx)(s.code,{children:"timeout"}),", ",(0,d.jsx)(s.code,{children:"protected"}),")."]}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-ts",children:"const remove = module.on('props', () => {});\nremove(); // unregister\n"})}),"\n",(0,d.jsx)(s.h3,{id:"destroy",children:(0,d.jsx)(s.code,{children:"destroy()"})}),"\n",(0,d.jsxs)(s.p,{children:["Destroys the module: emits ",(0,d.jsx)(s.code,{children:"destroy"}),", clears callbacks, runs all ",(0,d.jsx)(s.code,{children:"onDestroy"})," actions, and marks the instance as destroyed. Further calls to ",(0,d.jsx)(s.code,{children:"updateProps"})," or ",(0,d.jsx)(s.code,{children:"on"})," are no-ops."]}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-ts",children:"module.destroy();\n"})}),"\n",(0,d.jsx)(s.h2,{id:"example",children:"Example"}),"\n",(0,d.jsx)(s.p,{children:"Minimal custom module with typed props and callbacks:"}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-ts",children:"import {\n  Module,\n  IModuleCallbacksMap,\n  IModuleStaticProps,\n  IModuleMutableProps,\n} from 'vevet';\n\ninterface IMyCallbacks extends IModuleCallbacksMap {\n  custom: { value: number };\n}\n\ntype TStatic = IModuleStaticProps & { title: string };\ntype TMutable = IModuleMutableProps & { count: number };\n\nclass MyModule extends Module<IMyCallbacks, TStatic, TMutable> {\n  _getStatic() {\n    return { ...super._getStatic(), title: '' };\n  }\n  _getMutable() {\n    return { ...super._getMutable(), count: 0 };\n  }\n\n  constructor(props?: TStatic & TMutable, onCallbacks?: any) {\n    super(props, onCallbacks);\n  }\n}\n\nconst m = new MyModule(\n  { title: 'Hi', count: 1 },\n  {\n    onDestroy: () => console.log('destroyed'),\n    onProps: () => console.log(m.props),\n  },\n);\n\nm.updateProps({ count: 2 });\nm.destroy();\n"})}),"\n",(0,d.jsx)(s.h2,{id:"typedoc",children:"Typedoc"}),"\n",(0,d.jsxs)(s.p,{children:["For full API details and types, see ",(0,d.jsx)(s.strong,{children:(0,d.jsx)(s.a,{href:"https://vevetjs.com/v5/classes/Module.html",children:"Module"})})," in Typedoc."]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,d.jsx)(s,{...e,children:(0,d.jsx)(i,{...e})}):i(e)}},8453(e,s,n){n.d(s,{R:()=>r,x:()=>t});var l=n(6540);const d={},o=l.createContext(d);function r(e){const s=l.useContext(o);return l.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),l.createElement(o.Provider,{value:s},e.children)}}}]);
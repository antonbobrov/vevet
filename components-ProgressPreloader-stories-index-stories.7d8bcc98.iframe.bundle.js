/*! For license information please see components-ProgressPreloader-stories-index-stories.7d8bcc98.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkvevet=self.webpackChunkvevet||[]).push([[838],{"./src/components/ProgressPreloader/stories/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var react=__webpack_require__("./node_modules/react/index.js"),selectAll=__webpack_require__("./node_modules/vevet-dom/dist/es/selectAll.js"),esm=__webpack_require__("./node_modules/@anton.bobrov/p-cancelable/lib/esm/index.js"),AnimationFrame=__webpack_require__("./src/components/AnimationFrame/index.ts"),Preloader=__webpack_require__("./src/components/Preloader/index.ts"),Timeline=__webpack_require__("./src/components/Timeline/index.ts"),clamp=__webpack_require__("./src/utils/math/clamp.ts"),lerp=__webpack_require__("./src/utils/math/lerp.ts");function preloadCustomElement(data,instance){return new Promise((resolve=>{const{targetProgress}=data,loadProgress=function getLoadProgress({element,targetProgress}){if(void 0!==element.isComplete)return"boolean"==typeof element.isComplete&&element.isComplete?targetProgress:"number"==typeof element.isComplete?element.isComplete:0;if(void 0!==element.isLoaded){if("boolean"==typeof element.isLoaded&&element.isLoaded)return targetProgress;if("number"==typeof element.isLoaded)return element.isLoaded}const isLoadedAttr=element.getAttribute("data-is-loaded");if(null!==isLoadedAttr&&""!==isLoadedAttr&&"false"!==isLoadedAttr){const isLoadedAttrNum=parseFloat(isLoadedAttr);return Number.isNaN(isLoadedAttrNum)?targetProgress:isLoadedAttrNum}return 0}(data);loadProgress>=targetProgress?resolve():setTimeout((()=>{instance.isDestroyed||preloadCustomElement(data,instance).then((()=>resolve())).catch((()=>{}))}),50)}))}var getApp=__webpack_require__("./src/utils/internal/getApp.ts");class ProgressPreloader extends Preloader.Z{_getDefaultProps(){return{...super._getDefaultProps(),resourcesQuantity:0,canPreloadImages:!0,canPreloadVideos:!1,preloadCustomSelector:".js-preload",preloadIgnoreClassName:"js-preload-ignore",lerp:.1,forceEnd:500}}get images(){return this._images}get videos(){return this._videos}get customResources(){return this._customResources}get resourcesQuantity(){return this._resourcesQuantity+this.props.resourcesQuantity+this.images.length+this.videos.length+this.customResources.length+1}get loadedResourcesQuantity(){return(0,clamp.q)(this._loadedResourcesQuantity,[0,this.resourcesQuantity])}get loadProgress(){return this.loadedResourcesQuantity/this.resourcesQuantity}get progress(){return this._progress}set progress(val){this._progress=val,this._handleProgressChange()}constructor(initialProps,canInit=!0){super(initialProps,!1),this._images=[],this._videos=[],this._customResources=[],this._resourcesQuantity=0,this._loadedResourcesQuantity=0,this._progress=0,canInit&&this.init()}_init(){this._getResources(),super._init()}_setEvents(){super._setEvents();const{lerp:lerpProp}=this.props;"number"==typeof lerpProp&&(this._animationFrame=new AnimationFrame.K,this._animationFrame.addCallback("frame",(()=>{this.progress=(0,lerp.C)(this.progress,this.loadProgress,lerpProp)})),this._animationFrame.play()),(0,getApp.S)().onPageLoad().then((()=>this._handleLoadedResource({isSuccess:!0}))).catch((()=>{})),this._preloadResources()}_getResources(){const{canPreloadImages,canPreloadVideos,preloadCustomSelector,preloadIgnoreClassName}=this.props;if(canPreloadImages){(0,selectAll.U)("img").forEach((image=>{!image.classList.contains(preloadIgnoreClassName)&&"lazy"!==image.loading&&this._images.push(image)}))}if(canPreloadVideos){(0,selectAll.U)("video").forEach((video=>{video.classList.contains(preloadIgnoreClassName)||this._videos.push(video)}))}preloadCustomSelector&&Array.from((0,selectAll.U)(preloadCustomSelector)).forEach((element=>{if(element.classList.contains(preloadIgnoreClassName))return;let loadCount=parseInt(element.getAttribute("data-load-count")||"1",10);loadCount=Number.isNaN(loadCount)?1:(0,clamp.q)(loadCount,[1,1/0]);for(let index=1;index<=loadCount;index+=1){const targetProgress=index/loadCount;this._customResources.push({element,targetProgress})}}))}_onLoaded(){return new esm.A((resolve=>{let isCallbackDone=!1;this.callbacks.add("progress",(({progress})=>{progress>=1&&!isCallbackDone&&(isCallbackDone=!0,resolve())}),{isProtected:!0,name:this.name})}))}_preloadResources(){this.images.forEach((image=>function preloadImage(imageProp,action){if(imageProp.complete)return void action(!0);const image=new Image;image.addEventListener("load",(()=>action(!0))),image.addEventListener("error",(()=>action(!1))),image.crossOrigin="anonymous",image.src=imageProp.currentSrc||imageProp.src}(image,(isSuccess=>this._handleLoadedResource({element:image,isSuccess}))))),this.videos.forEach((video=>function preloadVideo(video,action){video.readyState>0?action(!0):"none"!==video.preload?(video.addEventListener("error",(()=>action(!1))),video.addEventListener("loadedmetadata",(()=>action(!0)))):action(!1)}(video,(isSuccess=>this._handleLoadedResource({element:video,isSuccess}))))),this._customResources.forEach((data=>{preloadCustomElement(data,this).then((()=>this._handleLoadedResource({element:data.element,isSuccess:!0}))).catch((()=>{}))}))}_handleLoadedResource({element,isSuccess}){this.loadProgress>=1||(this._loadedResourcesQuantity+=1,this.callbacks.tbt("resourceLoad",{element,atProgress:this.progress,loadProgress:this.loadProgress,isSuccess}),this._animationFrame||(this.progress=this.loadProgress))}iterateLoadedResources(quantityProp=1){const quantity=Math.abs(quantityProp);for(let index=0;index<quantity;index+=1)this._handleLoadedResource({isSuccess:!0})}iterateResourcesQuantity(quantity=1){this._resourcesQuantity+=quantity}_handleProgressChange(){if(this.callbacks.tbt("progress",{progress:this.progress,loadProgress:this.loadProgress}),this.progress>=1)this._animationFrame&&(this._animationFrame.destroy(),this._animationFrame=void 0);else if("number"==typeof this.props.forceEnd&&this.loadProgress>=1&&!this._endTimeline){this._animationFrame&&(this._animationFrame.destroy(),this._animationFrame=void 0),this._endTimeline=new Timeline.K({duration:this.props.forceEnd});const startProgress=this.progress;this._endTimeline.addCallback("progress",(({p})=>{const diff=1-startProgress;this.progress=startProgress+diff*p})),this._endTimeline.play()}}_destroy(){super._destroy(),this._animationFrame?.destroy(),this._endTimeline?.destroy()}}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Component=()=>{const containerRef=(0,react.useRef)(null),[progress,setProgress]=(0,react.useState)(0),[isTestElementInDom,setIsTestElementInDom]=(0,react.useState)(!0),[isCustomResourceLoaded,setIsCustomResourceLoaded]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{const container=containerRef.current;if(!container)return;const instance=new ProgressPreloader({container,canPreloadImages:!0,canPreloadVideos:!0});instance.addCallback("progress",(({progress:progressProp})=>{setProgress(progressProp)})),instance.addCallback("resourceLoad",(data=>{console.log("resourceLoad",data)})),setIsTestElementInDom(!1);const timeout=setTimeout((()=>setIsCustomResourceLoaded(!0)),2e3);return()=>{instance?.destroy(),clearTimeout(timeout)}}),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{ref:containerRef,className:"v-preloader",style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#ccc",fontSize:40},children:(100*progress).toFixed(0).padStart(2,"0")}),(0,jsx_runtime.jsx)("img",{src:"https://picsum.photos/400/600",alt:"",crossOrigin:"anonymous"}),(0,jsx_runtime.jsx)("img",{src:"https://picsum.photos/400/601",alt:"",crossOrigin:"anonymous",loading:"lazy"}),(0,jsx_runtime.jsx)("img",{src:"https://picsum.photos/400/602",alt:"",crossOrigin:"anonymous",className:"js-preload-ignore"}),isTestElementInDom&&(0,jsx_runtime.jsx)("video",{autoPlay:!0,muted:!0,controls:!0,src:"https://www.shutterstock.com/shutterstock/videos/1080319025/preview/stock-footage-abstract-tech-earth-globalization-in-d-motion-graphic-concept-transmit-ai-networking-on-fiber.mp4"}),(0,jsx_runtime.jsx)("p",{className:"js-preload","data-is-loaded":isCustomResourceLoaded?"true":"false",children:"Custom preload"})]})};try{Component.displayName="Component",Component.__docgenInfo={description:"",displayName:"Component",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ProgressPreloader/stories/index.tsx#Component"]={docgenInfo:Component.__docgenInfo,name:"Component",path:"src/components/ProgressPreloader/stories/index.tsx#Component"})}catch(__react_docgen_typescript_loader_error){}const index_stories={title:"Components/ProgressPreloader",component:Component},Default={};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]},"./src/base/Component/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{u:()=>Component});var _Module__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/base/Module/index.ts");class Component extends _Module__WEBPACK_IMPORTED_MODULE_0__.n{addPlugin(plugin){void 0===this._plugins&&(this._plugins=[]),this._plugins.push(plugin),plugin.component=this,plugin.init()}_destroyPlugins(){this._plugins?.forEach((plugin=>plugin.destroy()))}_destroy(){super._destroy(),this._destroyPlugins()}}},"./src/base/Module/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>Module});var vevet_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/vevet-dom/dist/es/listeners.js"),_MutableProps__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/base/MutableProps/index.ts"),_Callbacks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/base/Callbacks/index.ts"),_utils_internal_getApp__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/internal/getApp.ts");class Module{_getDefaultProps(){return{}}get props(){return this._mutableProps.props}get callbacks(){return this._callbacks}get name(){return this.constructor.name}get prefix(){return""}_isInitialized=!1;get isInitialized(){return this._isInitialized}_isDestroyed=!1;get isDestroyed(){return this._isDestroyed}constructor(initialProps,canInit=!0){if(!(0,_utils_internal_getApp__WEBPACK_IMPORTED_MODULE_0__.S)())throw new Error('Vevet.Application does not exist yet. Call "new Vevet.Application()" before using all the stuff');this._callbacks=new _Callbacks__WEBPACK_IMPORTED_MODULE_1__.n,this._listeners=[],this._destroyableActions=[],this._classNamesToRemove=[];const props={...this._getDefaultProps(),...initialProps||{}};this._mutableProps=new _MutableProps__WEBPACK_IMPORTED_MODULE_2__.P(props,(()=>this._onPropsMutate()),this.name),canInit&&this.init()}addResponsiveProps(rules){if(this.isInitialized)throw new Error("Responsive properties cannot be added after `init` is called");this._mutableProps.addResponsiveProps(rules)}changeProps(props){this.isDestroyed||(this._mutableProps.changeProps(props),this._callbacks.tbt("propsChange",void 0))}_onPropsMutate(){this._callbacks.tbt("propsMutate",void 0)}init(){this.isInitialized||(this._isInitialized=!0,this._init())}_init(){}addDestroyableAction(action){this._destroyableActions.push(action)}addViewportCallback(target,action,data={}){const callback=(0,_utils_internal_getApp__WEBPACK_IMPORTED_MODULE_0__.S)().viewport.callbacks.add(target,action,{...data,name:this.constructor.name});this.addDestroyableAction((()=>callback.remove()))}addCallback(target,action,settings={}){return this.callbacks.add(target,action,settings)}addEventListener(el,target,callback,options){const listener=(0,vevet_dom__WEBPACK_IMPORTED_MODULE_3__.q)(el,target,callback,options);return this._listeners.push(listener),{...listener,remove:()=>(this._listeners=this._listeners.filter((item=>item.id!==listener.id)),listener.remove())}}className(...classNames){return classNames.map((value=>`${this.prefix}${value}`)).join(" ")}toggleClassName(element,className,isActive){const isAlreadyExists=element.classList.contains(className);element.classList.toggle(className,isActive),isAlreadyExists||this._classNamesToRemove.push({element,className})}destroy(){this.isDestroyed||this._destroy()}_destroy(){this._callbacks.tbt("destroy",void 0),this._callbacks.destroy(),this._mutableProps.destroy(),this._destroyableActions.forEach((action=>action())),this._listeners.forEach((listener=>listener.remove())),this._classNamesToRemove.forEach((({element,className})=>element.classList.remove(className))),this._isDestroyed=!0}}},"./src/base/MutableProps/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>MutableProps});var _utils_internal_getApp__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/internal/getApp.ts");class MutableProps{_responsiveRules=[];get props(){return this._props}constructor(_initProps,_onMutate=()=>{},_name="Responsive Props"){this._initProps=_initProps,this._onMutate=_onMutate,this._name=_name,this._refProps={..._initProps},this._props={..._initProps},this._activeBreakpoints=[]}addResponsiveProps(rules){this._responsiveRules.push(rules),this._responseProps(),void 0===this._viewportCallback&&(this._viewportCallback=(0,_utils_internal_getApp__WEBPACK_IMPORTED_MODULE_0__.S)().viewport.callbacks.add("width",this._responseProps.bind(this),{name:this._name}))}_responseProps(){const app=(0,_utils_internal_getApp__WEBPACK_IMPORTED_MODULE_0__.S)(),{viewport}=app;let newProps=!1;const statProp={...this._refProps},prevActiveBreakpointsString=[...this._activeBreakpoints].join("_");this._activeBreakpoints=[],this._responsiveRules.forEach((({settings,breakpoint})=>{"number"==typeof breakpoint?viewport.width<=breakpoint&&(this._activeBreakpoints.push(breakpoint),newProps={...statProp,...settings}):"string"==typeof breakpoint&&(("viewport_desktop"===breakpoint&&viewport.isDesktop||"viewport_tablet"===breakpoint&&viewport.isTablet||"viewport_phone"===breakpoint&&viewport.isPhone)&&(this._activeBreakpoints.push(breakpoint),newProps={...newProps||statProp,...settings}),("device_phone"===breakpoint&&app.isPhone||"device_tablet"===breakpoint&&app.isTablet||"device_mobile"===breakpoint&&app.isMobile)&&(this._activeBreakpoints.push(breakpoint),newProps={...newProps||statProp,...settings}))}));const isPropsChanged=this._activeBreakpoints.join("_")!==prevActiveBreakpointsString;this._props=newProps?{...this._props,...newProps}:{...this._props,...this._refProps},isPropsChanged&&this._onMutate()}changeProps(props){this._props={...this._props,...props},this._refProps={...this._refProps,...props},this._onMutate()}destroy(){this._viewportCallback&&this._viewportCallback.remove()}}},"./src/components/AnimationFrame/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>AnimationFrame});var _base_Component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/base/Component/index.ts");class AnimationFrame extends _base_Component__WEBPACK_IMPORTED_MODULE_0__.u{_getDefaultProps(){return{...super._getDefaultProps(),fps:"auto",autoFpsFrames:10,isEnabled:!1}}get isPlaying(){return this._isPlaying}get computedFPS(){return this._computedFPS}get easeMultiplier(){return 60/this.computedFPS}constructor(initialProps,canInit=!0){super(initialProps,!1),this._isPlaying=!1,this._frame=null,this._frameIndex=-1,this._firstFrameTime=null,this._lastFrameTime=null,this._frameDurations=[],this._computedFPS="auto"!==this.props.fps?this.props.fps:60,canInit&&this.init()}_init(){super._init(),this.props.isEnabled&&this.play()}_onPropsMutate(){super._onPropsMutate(),this._frameIndex=-1,this._firstFrameTime=null,this._lastFrameTime=null,this.props.isEnabled?this._play():this._pause()}play(){this.isDestroyed||this.props.isEnabled||this.changeProps({isEnabled:!0})}_play(){this.isPlaying||(this._isPlaying=!0,this.callbacks.tbt("play",void 0),this.callbacks.tbt("toggle",void 0),this._frame=window.requestAnimationFrame(this._animate.bind(this)))}pause(){this.props.isEnabled&&this.changeProps({isEnabled:!1})}_pause(){this.isPlaying&&(this._frame&&(window.cancelAnimationFrame(this._frame),this._frame=null),this._isPlaying=!1,this.callbacks.tbt("pause",void 0),this.callbacks.tbt("toggle",void 0))}_animate(){if(!this._isPlaying)return;this._frame=window.requestAnimationFrame(this._animate.bind(this));const startTime=+new Date;null===this._firstFrameTime&&(this._firstFrameTime=startTime);const minFrameDuration="auto"===this.props.fps?1:1e3/this.props.fps,newFrameIndex=Math.floor((startTime-this._firstFrameTime)/minFrameDuration);newFrameIndex<=this._frameIndex||(this._frameIndex=newFrameIndex,this._computeFPS(startTime),this.callbacks.tbt("frame",void 0),this._lastFrameTime=startTime)}_computeFPS(startTime){const lastFrameDuration=startTime-(this._lastFrameTime??startTime);if(lastFrameDuration<=0||lastFrameDuration>250)return;if(this._frameDurations.push(lastFrameDuration),this._frameDurations.length<this.props.autoFpsFrames)return;const approximateFrameDuration=this._frameDurations.reduce(((prev,curr)=>prev+curr))/this._frameDurations.length,computedFPS=Math.floor(1e3/approximateFrameDuration),normalizedFPS=10*Math.round(computedFPS/10);this._computedFPS=normalizedFPS,this._frameDurations=[]}_destroy(){this.pause(),super._destroy()}}},"./src/components/BaseTimeline/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>BaseTimeline});var Component=__webpack_require__("./src/base/Component/index.ts"),easing=__webpack_require__("./node_modules/easing-progress/lib/esm/easing.js");var clampScope=__webpack_require__("./src/utils/math/clampScope.ts"),uid=__webpack_require__("./src/utils/common/uid.ts"),getApp=__webpack_require__("./src/utils/internal/getApp.ts");class BaseTimeline extends Component.u{_getDefaultProps(){return{...super._getDefaultProps(),easing:(0,getApp.S)().props.easing,nestedScope:[0,1],hasNestedEasingProgress:!1}}get p(){return this._p}set p(val){this._p=val,this._handleProgressUpdate()}get e(){return this._e}constructor(initialProps,canInit=!0){super(initialProps,!1),this._p=0,this._e=0,this._nestedTimelines=[],canInit&&this.init()}addNestedTimeline(timeline){const id=(0,uid.L)();return this._nestedTimelines.push({id,timeline}),{remove:()=>{this._nestedTimelines=this._nestedTimelines.filter((({id:nestedTimelineId})=>nestedTimelineId!==id))}}}_handleProgressUpdate(){this._e=((progress,easingType=window.vevetApp?.props.easing??!1)=>(0,easing.c)(progress,easingType))(this._p,this.props.easing),this.callbacks.tbt("progress",{p:this._p,e:this._e}),this._renderNestedTimelines()}_renderNestedTimelines(){const{length}=this._nestedTimelines;if(0===length)return;const progressForNestedTimeline=this.props.hasNestedEasingProgress?this.e:this.p;this._nestedTimelines.forEach((({timeline})=>{const timelineProgress=(0,clampScope.Y)(progressForNestedTimeline,timeline.props.nestedScope,[0,1]);timeline.p=timelineProgress}))}_destroy(){super._destroy(),this._nestedTimelines.forEach((({timeline})=>timeline.destroy()))}}},"./src/components/Preloader/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>Preloader});var vevet_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/vevet-dom/dist/es/selectOne.js"),_utils_common_PCancelable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@anton.bobrov/p-cancelable/lib/esm/index.js"),_base_Component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/base/Component/index.ts"),_utils_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/utils/common/normalizedTimeoutCallback.ts"),_utils_internal_getApp__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/internal/getApp.ts");class Preloader extends _base_Component__WEBPACK_IMPORTED_MODULE_0__.u{_getDefaultProps(){return{...super._getDefaultProps(),container:`#${this.prefix}`,hideAnimation:250}}get prefix(){return`${(0,_utils_internal_getApp__WEBPACK_IMPORTED_MODULE_1__.S)().prefix}preloader`}get container(){return this._container}get isHidden(){return this._isHidden}constructor(initialProps,canInit=!0){if(super(initialProps,!1),this.props.container){const container=(0,vevet_dom__WEBPACK_IMPORTED_MODULE_2__.J)(this.props.container);container instanceof HTMLElement&&(this._container=container,this.toggleClassName(container,this.className(""),!0))}this._isToBeHidden=!1,this._isHidden=!1,canInit&&this.init()}_init(){super._init(),this._setEvents()}_setEvents(){const loadEvent=this._onLoaded();loadEvent.then((()=>{this.isDestroyed||this._handleLoaded()})).catch((()=>{})),this.addDestroyableAction((()=>loadEvent.cancel()))}_onLoaded(){return(0,_utils_internal_getApp__WEBPACK_IMPORTED_MODULE_1__.S)().onPageLoad()}_handleLoaded(){this.callbacks.tbt("loaded",void 0),"boolean"!=typeof this.props.hideAnimation&&this.hide()}hide(duration=("boolean"!=typeof this.props.hideAnimation?this.props.hideAnimation:250)){return this._isToBeHidden=!0,this.callbacks.tbt("hide",void 0),new _utils_common_PCancelable__WEBPACK_IMPORTED_MODULE_3__.A((resolve=>{const container=this._container;if(!container)return this._handleHidden(),void resolve();container.style.transition=`opacity ${duration}ms, visibility ${duration}ms`,container.style.opacity="0",container.style.visibility="hidden";const timeout=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.y)((()=>{container.style.display="none",this._handleHidden(),resolve()}),duration);this.addDestroyableAction((()=>timeout.clear()))}))}_handleHidden(){this._isHidden=!0,this.callbacks.tbt("hidden",void 0)}onHide(action){if(!this._isToBeHidden)return this.addCallback("hide",(()=>action()));action()}onHidden(action){if(!this._isHidden)return this.addCallback("hidden",(()=>action()));action()}}},"./src/components/Timeline/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>Timeline});var _utils_math__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/math/clamp.ts"),_BaseTimeline__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/BaseTimeline/index.ts");class Timeline extends _BaseTimeline__WEBPACK_IMPORTED_MODULE_0__.z{_getDefaultProps(){return{...super._getDefaultProps(),duration:1e3,shouldDestroyOnEnd:!1}}get isPlaying(){return void 0!==this._animationFrame}get isReversed(){return this._isReversed}get isPaused(){return this._isPaused}get duration(){return Math.max(this.props.duration,1)}constructor(initialProps,canInit=!0){super(initialProps,!1),this._animationFrame=void 0,this._animationFrameLastTime=0,this._isReversed=!1,this._isPaused=!1,canInit&&this.init()}play(){this.isDestroyed||1===this.p||(this._isReversed=!1,this._isPaused=!1,this.isPlaying||(this._animationFrameLastTime=+new Date,this._animate()))}reverse(){this.isDestroyed||0===this.p||(this._isReversed=!0,this._isPaused=!1,this.isPlaying||(this._animationFrameLastTime=+new Date,this._animate()))}pause(){this.isDestroyed||(this._isPaused=!0,this._animationFrame&&window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}reset(){this.isDestroyed||(this.pause(),this.p=0)}_animate(){if(this.isPaused)return;const{isReversed}=this,currentTime=+new Date,frameDiff=Math.abs(this._animationFrameLastTime-currentTime);this._animationFrameLastTime=currentTime;const progressIterator=frameDiff/this.duration/(isReversed?-1:1),progressTarget=(0,_utils_math__WEBPACK_IMPORTED_MODULE_1__.q)(this.p+progressIterator,[0,1]);if(this.p=progressTarget,1===progressTarget&&!isReversed||0===progressTarget&&isReversed)return this._isReversed=!1,this._isPaused=!1,void(this._animationFrame=void 0);this._animationFrame=window.requestAnimationFrame(this._animate.bind(this))}_handleProgressUpdate(){super._handleProgressUpdate(),0!==this.p?1===this.p&&(this.callbacks.tbt("end",void 0),this.props.shouldDestroyOnEnd&&this.destroy()):this.callbacks.tbt("start",void 0)}_destroy(){this.pause(),super._destroy()}}},"./src/utils/math/clamp.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function clamp(val,scope=[0,1]){return val<scope[0]?scope[0]:val>scope[1]?scope[1]:val}__webpack_require__.d(__webpack_exports__,{q:()=>clamp})},"./src/utils/math/clampScope.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>clampScope});var clamp=__webpack_require__("./src/utils/math/clamp.ts");function clampScope(value,scopeProp=[0,1],clampProp=[0,1]){return(0,clamp.q)(function scoped(val,scopeValue=[0,1]){return(val-scopeValue[0])/(scopeValue[1]-scopeValue[0])}(value,scopeProp),clampProp)}},"./src/utils/math/lerp.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function lerp(current,target,ease,approximationLeft=.001){const value=current*(1-ease)+target*ease;return Math.abs(target-value)<=approximationLeft?target:value}__webpack_require__.d(__webpack_exports__,{C:()=>lerp})},"./node_modules/easing-progress/lib/esm/easing.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function easingByBezier(progress,bezier){const[x1,y1,x2,y2]=bezier;if(x1===y1&&x2===y2)return progress;const val=[];for(let i=0;i<11;++i)val[i]=bezierCalc(.1*i,x1,x2);return 0===progress?0:1===progress?1:bezierCalc(function bezierX(bezier,progress,val){const x1=bezier[0],x2=bezier[2];let start=0,current=1;for(;10!==current&&val[current]<=progress;++current)start+=.1;--current;const dist=(progress-val[current])/(val[current+1]-val[current]),guessForT=start+.1*dist,initialSlope=bezierSlope(guessForT,x1,x2);if(initialSlope>=.001)return function bezierNewtonRaphsonIterate(progress,guessForT,x1,x2){for(let i=0;i<4;++i){const currentSlope=bezierSlope(guessForT,x1,x2);if(0===currentSlope)return guessForT;guessForT-=(bezierCalc(guessForT,x1,x2)-progress)/currentSlope}return guessForT}(progress,guessForT,x1,x2);if(0===initialSlope)return guessForT;return function bezierBinarySubdivide(progress,a,b,x1,x2){let currentX,currentT,i=0;do{currentT=a+(b-a)/2,currentX=bezierCalc(currentT,x1,x2)-progress,currentX>0?b=currentT:a=currentT}while(Math.abs(currentX)>1e-7&&++i<10);return currentT}(progress,start,start+.1,x1,x2)}(bezier,progress,val),y1,y2)}function bezierCalc(progress,x1,x2){return((bezierA(x1,x2)*progress+bezierB(x1,x2))*progress+bezierC(x1))*progress}function bezierA(x1,x2){return 1-3*x2+3*x1}function bezierB(x1,x2){return 3*x2-6*x1}function bezierC(x1){return 3*x1}function bezierSlope(progress,x1,x2){return 3*bezierA(x1,x2)*progress*progress+2*bezierB(x1,x2)*progress+bezierC(x1)}function easing(progress,easingType=!1){return Array.isArray(easingType)?easingByBezier(progress,easingType):"function"==typeof easingType?easingType(progress):progress}__webpack_require__.d(__webpack_exports__,{c:()=>easing})},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var f=__webpack_require__("./node_modules/react/index.js"),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;for(b in void 0!==g&&(e=""+g),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(h=a.ref),a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l,exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")},"./node_modules/vevet-dom/dist/es/isElement.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function isElement(el){return el instanceof HTMLElement||el instanceof Element}__webpack_require__.d(__webpack_exports__,{v:()=>isElement})},"./node_modules/vevet-dom/dist/es/isWindow.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function isWindow(el){return el instanceof Window}__webpack_require__.d(__webpack_exports__,{l:()=>isWindow})},"./node_modules/vevet-dom/dist/es/selectAll.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>selectAll});var _isElement__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/vevet-dom/dist/es/isElement.js"),_selectOne__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/vevet-dom/dist/es/selectOne.js");function selectAll(selector,parent){if(selector instanceof NodeList)return selector;if((0,_isElement__WEBPACK_IMPORTED_MODULE_0__.v)(selector))return[selector];if(Array.isArray(selector))return selector;if(void 0!==parent){const parenEl=(0,_selectOne__WEBPACK_IMPORTED_MODULE_1__.J)(parent);if(parenEl)return parenEl.querySelectorAll(selector)}return document.querySelectorAll(selector)}},"./node_modules/vevet-dom/dist/es/selectOne.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>selectOne});var _isElement__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/vevet-dom/dist/es/isElement.js"),_isWindow__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/vevet-dom/dist/es/isWindow.js");function selectOne(selector,parent){if((0,_isWindow__WEBPACK_IMPORTED_MODULE_0__.l)(selector))return selector;if((0,_isElement__WEBPACK_IMPORTED_MODULE_1__.v)(selector))return selector;if(void 0!==parent){const parenEl=selectOne(parent);if(parenEl)return parenEl.querySelector(selector)}return document.querySelector(selector)}}}]);
"use strict";(self.webpackChunkvevet=self.webpackChunkvevet||[]).push([[394],{"./src/components/Timeline/stories/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithNested:()=>WithNested,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var react=__webpack_require__("./node_modules/react/index.js"),Timeline=__webpack_require__("./src/components/Timeline/index.ts"),easeInOutBounce=__webpack_require__("./node_modules/easing-progress/lib/esm/easing.net/easeInOutBounce.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Basic=()=>{const thumbRef=(0,react.useRef)(null),inputRef=(0,react.useRef)(null),[timeline,setTimeline]=(0,react.useState)();return(0,react.useEffect)((()=>{const instance=new Timeline.K({duration:3500,easing:easeInOutBounce.g});return setTimeline(instance),instance.addCallback("progress",(({e,p})=>{inputRef.current&&(inputRef.current.value=`${p}`),thumbRef.current&&(thumbRef.current.style.left=100*e+"%")})),()=>instance.destroy()}),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>timeline?.play(),children:"Play"}),(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>timeline?.pause(),children:"Pause"}),(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>timeline?.reverse(),children:"Reverse"}),(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>timeline?.reset(),children:"Reset"}),(0,jsx_runtime.jsx)("input",{ref:inputRef,type:"range",min:0,max:1,defaultValue:0,step:1e-4,style:{width:"100%"},onChange:event=>{timeline&&(timeline.p=parseFloat(event.currentTarget.value))}}),(0,jsx_runtime.jsx)("div",{style:{position:"relative",marginTop:"10px",width:"100%",height:"20px",backgroundColor:"#dedede"},children:(0,jsx_runtime.jsx)("div",{ref:thumbRef,style:{position:"absolute",top:"-5px",left:0,width:"10px",height:"30px",transform:"translate(-50%, 0)",backgroundColor:"#000"}})})]})};try{Basic.displayName="Basic",Basic.__docgenInfo={description:"",displayName:"Basic",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Timeline/stories/Basic.tsx#Basic"]={docgenInfo:Basic.__docgenInfo,name:"Basic",path:"src/components/Timeline/stories/Basic.tsx#Basic"})}catch(__react_docgen_typescript_loader_error){}var spreadScope=__webpack_require__("./src/utils/math/spreadScope.ts"),BaseTimeline=__webpack_require__("./src/components/BaseTimeline/index.ts");const Nested=()=>{const containerRef=(0,react.useRef)(null),inputRef=(0,react.useRef)(null),[timeline,setTimeline]=(0,react.useState)();return(0,react.useEffect)((()=>{const instance=new Timeline.K({duration:3500,easing:easeInOutBounce.g});if(setTimeline(instance),instance.addCallback("progress",(({p})=>{inputRef.current&&(inputRef.current.value=`${p}`)})),containerRef.current){const children=Array.from(containerRef.current.children),scopes=(0,spreadScope.Y)(children.length,.9);children.forEach(((child,index)=>{const nestedTm=new BaseTimeline.z({nestedScope:scopes[index],easing:easeInOutBounce.g});nestedTm.addCallback("progress",(({e})=>{child.style.transform=`scale(${e}, 1)`})),instance.addNestedTimeline(nestedTm)}))}return()=>instance.destroy()}),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>timeline?.play(),children:"Play"}),(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>timeline?.pause(),children:"Pause"}),(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>timeline?.reverse(),children:"Reverse"}),(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>timeline?.reset(),children:"Reset"}),(0,jsx_runtime.jsx)("input",{ref:inputRef,type:"range",min:0,max:1,defaultValue:0,step:1e-4,style:{width:"100%"},onChange:event=>{timeline&&(timeline.p=parseFloat(event.currentTarget.value))}}),(0,jsx_runtime.jsxs)("div",{ref:containerRef,style:{marginTop:20,width:"100%",display:"grid",gap:10},children:[(0,jsx_runtime.jsx)("div",{style:{height:"30px",backgroundColor:"#F7DBA7",transform:"scale(0, 1)"}}),(0,jsx_runtime.jsx)("div",{style:{height:"30px",backgroundColor:"#F1AB86",transform:"scale(0, 1)"}}),(0,jsx_runtime.jsx)("div",{style:{height:"30px",backgroundColor:"#C57B57",transform:"scale(0, 1)"}}),(0,jsx_runtime.jsx)("div",{style:{height:"30px",backgroundColor:"#1E2D2F",transform:"scale(0, 1)"}}),(0,jsx_runtime.jsx)("div",{style:{height:"30px",backgroundColor:"#041F1E",transform:"scale(0, 1)"}})]})]})};try{Nested.displayName="Nested",Nested.__docgenInfo={description:"",displayName:"Nested",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Timeline/stories/Nested.tsx#Nested"]={docgenInfo:Nested.__docgenInfo,name:"Nested",path:"src/components/Timeline/stories/Nested.tsx#Nested"})}catch(__react_docgen_typescript_loader_error){}const index_stories={title:"Components/Timeline"},Default=props=>(0,jsx_runtime.jsx)(Basic,{...props});Default.displayName="Default";const WithNested=props=>(0,jsx_runtime.jsx)(Nested,{...props});WithNested.displayName="WithNested",Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"props => <Basic {...props} />",...Default.parameters?.docs?.source}}},WithNested.parameters={...WithNested.parameters,docs:{...WithNested.parameters?.docs,source:{originalSource:"props => <Nested {...props} />",...WithNested.parameters?.docs?.source}}};const __namedExportsOrder=["Default","WithNested"]},"./src/components/Timeline/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>Timeline});var _utils_math__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/math/clamp.ts"),_BaseTimeline__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/BaseTimeline/index.ts");class Timeline extends _BaseTimeline__WEBPACK_IMPORTED_MODULE_0__.z{_getDefaultProps(){return{...super._getDefaultProps(),duration:1e3,shouldDestroyOnEnd:!1}}get isPlaying(){return void 0!==this._animationFrame}get isReversed(){return this._isReversed}get isPaused(){return this._isPaused}get duration(){return Math.max(this.props.duration,1)}constructor(initialProps,canInit=!0){super(initialProps,!1),this._animationFrame=void 0,this._animationFrameLastTime=0,this._isReversed=!1,this._isPaused=!1,canInit&&this.init()}play(){this.isDestroyed||1===this.p||(this._isReversed=!1,this._isPaused=!1,this.isPlaying||(this._animationFrameLastTime=+new Date,this._animate()))}reverse(){this.isDestroyed||0===this.p||(this._isReversed=!0,this._isPaused=!1,this.isPlaying||(this._animationFrameLastTime=+new Date,this._animate()))}pause(){this.isDestroyed||(this._isPaused=!0,this._animationFrame&&window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}reset(){this.isDestroyed||(this.pause(),this.p=0)}_animate(){if(this.isPaused)return;const{isReversed}=this,currentTime=+new Date,frameDiff=Math.abs(this._animationFrameLastTime-currentTime);this._animationFrameLastTime=currentTime;const progressIterator=frameDiff/this.duration/(isReversed?-1:1),progressTarget=(0,_utils_math__WEBPACK_IMPORTED_MODULE_1__.q)(this.p+progressIterator,[0,1]);if(this.p=progressTarget,1===progressTarget&&!isReversed||0===progressTarget&&isReversed)return this._isReversed=!1,this._isPaused=!1,void(this._animationFrame=void 0);this._animationFrame=window.requestAnimationFrame(this._animate.bind(this))}_handleProgressUpdate(){super._handleProgressUpdate(),0!==this.p?1===this.p&&(this.callbacks.tbt("end",void 0),this.props.shouldDestroyOnEnd&&this.destroy()):this.callbacks.tbt("start",void 0)}_destroy(){this.pause(),super._destroy()}}}}]);